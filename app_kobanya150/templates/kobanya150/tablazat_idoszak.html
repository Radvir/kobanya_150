{% extends 'base_generic.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container">
    <h1>{{ title }}</h1>
    
    {% if user.is_authenticated %}
        <p>Üdvözöljük, {{ user.username }}!</p>
    {% else %}
        <p><a href="{% url 'login' %}">Bejelentkezés</a> a táblázatok lekérdezéséhez</p>
    {% endif %}
    <div>
        
        <h2>{{idoszak.kezdoDatum}} - {{idoszak.vegDatum}} jelentkezési időszak lekérdezése</h2>
        <a href="../">Vissza</a>
        
        {% for alkalom in alkalmak %}
        <div class="alkalom-item">
            <p><strong>Dátum:</strong> {{ alkalom.datum }}</p>
            <p>{{alkalom.ido_kezdes}}-{{alkalom.ido_vege}}</p>
            <p><strong>Jelentkezők száma:</strong> {{ alkalom.jelentkezok.count }}</p>
            
            <form action="{{alkalom.id}}/" method="post">
                {% csrf_token %}
                <input type="hidden" name="alkalom_id" value="{{ alkalom.id }}">
                <button type="submit" class="btn btn-primary">Lekérdezés</button>
            </form>
        </div>
        {% endfor %}
    </div>
</div>

<style>
.week-item {
    border: 1px solid #ddd;
    padding: 15px;
    margin: 10px 0;
    border-radius: 5px;
}

.alkalom-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.alkalom-item {
    border: 2px solid #ddd;
    padding: 30px;
    margin: 10px 0;
    border-radius: 5px;

}

.btn {
    display: inline-block;
    padding: 8px 16px;
    margin: 5px;
    text-decoration: none;
    border-radius: 4px;
    color: white;
}

.btn-primary {
    background-color: #007bff;
}

.btn-warning {
    background-color: #ffc107;
    color: black;
}

.current-week {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 5px;
    margin-bottom: 20px;
}
</style>
{% endblock %}